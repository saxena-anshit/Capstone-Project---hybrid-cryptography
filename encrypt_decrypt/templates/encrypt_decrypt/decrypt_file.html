<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>Encrypt-decrypt</title>

        <!-- styles -->
        <link href="{% static 'encrypt_decrypt/css/bootstrap.css' %}" rel="stylesheet" />
        <link href="{% static 'encrypt_decrypt/css/bootstrap-responsice.css' %}" rel="stylesheet" />
        <link href="{% static 'encrypt_decrypt/css/animate.css' %}" rel="stylesheet" />
        <link href="{% static 'encrypt_decrypt/css/style.css' %}" rel="stylesheet" />
        <link href="{% static 'encrypt_decrypt/color/default.css' %}" rel="stylesheet" />
    </head>

    <body>
        <header>
            <div id="topnav" class="navbar navbar-fixed-top default">
                <div class="navbar-inner">
                    <div class="container">
                        <div class="logo">
                            <a href="dash.html">
                                <h1 style="color:white">Encrypt-Decrypt</h1> 	
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        
            <section class="container">
                <div id="fileChoose">
                    <progress value="0" max="100" id="uploader">0%</progress> 
                    <br>

                    <h4>Choose a file to encrypt:</h4>
                    <br>

                    <input type="file" />

                    <br>
                    <br>

                    <input type="submit" value="Encrypt" />

                    <br>
                    <br>

                    <h5>Choose encrypted file to upload:</h5>
                    <br>

                    <input type="file" value="upload" id="fileButton"/>
                </div> 
            </section>

        <!-- Javascript Library Files -->
        <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase.js"></script>

        <script>
            var config = {
                apiKey: "AIzaSyCsXS_QZVSiH4P3udHFyT90YPpbsgsmMs4",
                authDomain: "capstone-c254b.firebaseapp.com",
                databaseURL: "https://capstone-c254b.firebaseio.com",
                projectId: "capstone-c254b",
                storageBucket: "capstone-c254b.appspot.com",
                messagingSenderId: "77734129600"
            };
            firebase.initializeApp(config);
            //Get elements for upload
            var fileButton = document.getElementById('fileButton');
            var uploader = document.getElementById('uploader')
            //Listen for file selector
            fileButton.addEventListener('change',function(e){
                //Get File
                var file = e.target.files[0];

                //create storage ref
                var storageRef = firebase.storage().ref('encrypted_files/' + file.name);

                //upload file
                var task=storageRef.put(file);
                alert("File uploaded!")
                //update progess bar
                task.on('state changed',

                function progress(snapshot){
                var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                uploader.value = percentage;
                },
                function error(err){

                },
                function complete(){

                }
                
                );

            });
        </script>
        
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/jquery.easing.js"></script>
        <script src="assets/js/bootstrap.js"></script>
        <script src="assets/js/parallax/jquery.parallax-1.1.3.js"></script>
        <script src="assets/js/nagging-menu.js"></script>
        <script src="assets/js/jquery.nav.js"></script>
        
        <!-- Template Custom Javascript File -->
        <script src="assets/js/custom.js"></script>

    </body>
</html>